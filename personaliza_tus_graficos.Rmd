---
title: "Personaliza tus gráficos"
author: "Maggie Suero"
date: "6/7/2020"
output: html_document
---

# Personaliza tus gráficos

```{r setup, include=FALSE}
## Cargamos los paquetes que vamos a emplear para hacer los gráficos y para poder hacer arreglos en los datos
library(ggplot2)
library(dplyr)
```

Vamos a utilizar el [dataset](https://github.com/allisonhorst/palmerpenguins) de Pingüinos de Palmer. 
Estos datos fueron recogidos y están disponibles gracias a la Dra. Kristen Gorman y la Estación Palmer de la Antártida (Palmer Station, Antarctica LTER).
```{r}
citation("palmerpenguins")
```


Empecemos conociendo a los pingüinos _(Artwork by @allison_horst)_:

![Palmer penguins](https://raw.githubusercontent.com/allisonhorst/palmerpenguins/master/man/figures/lter_penguins.png) 


```{r dataset, include=FALSE}
# Necesitamos instalar el paquete "remotes" para poder acceder al paquete que no está en el CRAN
# install.packages("remotes")
library(remotes)

# Instalamos el paquete "allisonhorst/palmerpenguins" y cargamos la base de datos "palmerpenguins"
# remotes::install_github("allisonhorst/palmerpenguins")
library(palmerpenguins) 

# Omitimos los valores perdidos 
pinguinos <- na.omit(penguins)
```
_Gráfico básico_

```{r}
ggplot(data = pinguinos, aes(x = flipper_length_mm, y = body_mass_g)) + 
  geom_point()

```

## Agregando un título principal y modificando los títulos de los ejes

```{r}
ggplot(data = pinguinos, aes(x = flipper_length_mm, y = body_mass_g)) + 
  geom_point() +
  labs(title = "Tamaño de los pingüinos, Estación Palmer LTER",
       subtitle = "Largo de la aleta y masa corporal por especie",
       x = "largo aleta (mm)",
       y = "masa corporal (g)")

```


## Forma (para gráficos de dispersión)

Puedes personalizar la forma de los "puntos" de los gráficos de dispersión utilizando cualquiera de las 25 opciones disponibles 

![Formas](https://es.r4ds.hadley.nz/03-visualize_files/figure-html/shapes-1.png) [Fuente](https://es.r4ds.hadley.nz/visualizaci%C3%B3n-de-datos.html).

```{r }
#.... y agrandamos el tamaño de los puntos
ggplot(data = pinguinos, aes(x = flipper_length_mm, y = body_mass_g)) + 
  geom_point(shape = 23, fill = "violet", color = "black", size = 2.5) +
  labs(title = "Tamaño de los pingüinos, Estación Palmer LTER",
       subtitle = "Largo de la aleta y masa corporal por especie",
       x = "largo aleta (mm)",
       y = "masa corporal (g)")  

```

```{r}
# Agregamos la opción de seleccionar la forma de acuerdo a las respuesta de la variable 
ggplot(data = pinguinos, aes(x = flipper_length_mm, y = body_mass_g)) + 
  geom_point(aes(shape = species, color = species)) +
  labs(title = "Tamaño de los pingüinos, Estación Palmer LTER",
       subtitle = "Largo de la aleta y masa corporal por especie",
       x = "largo aleta (mm)",
       y = "masa corporal (g)")

```

## Establecer el color manualmente 

Podemos establecer manualmente el color que queramos utilizar en los gráficos, de 5 [maneras](https://www.r-graph-gallery.com/ggplot2-color.html) diferentes:  
 
  * _Por nombre_: es el método más común. R ofrece 657 colores para elegir [nombre](http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf)
  * _rgb()_: esta función permite elegir colores utilizando los valores de rojos ("R" - red), verdes ("G" - green) y azules ("B" - blue). [RGB colors](https://www.rapidtables.com/web/color/RGB_Color.html)
  * _Numérica_: se puede llamar directamente al color por su número, por ejemplo `colors()[143]`.
  * _Código hexadecimal_: se puede utilizar los valores de los códigos hex. [Color Picker](https://htmlcolorcodes.com/)

```{r}

ggplot(data = pinguinos, aes(x = flipper_length_mm, y = body_mass_g)) + 
  geom_point(aes(color = species)) + 
  scale_color_manual(values = c("darkorange","purple","cyan4")) +
  labs(title = "Tamaño de los pingüinos, Estación Palmer LTER",
       subtitle = "Largo de la aleta y masa corporal por especie",
       x = "largo aleta (mm)",
       y = "masa corporal (g)",
       color = "Especie")


```

## Alpha

Alpha representa la opacidad o transparencia de los elementos del geom en el gráfico.
Los valores van del 0 (totalmente transparente) al 1 (totalmente visible).
```{r}

ggplot(data = pinguinos, aes(x = flipper_length_mm, y = body_mass_g)) + 
  geom_point(aes(color = species), alpha = 0.6) + 
  scale_color_manual(values = c("darkorange","purple","cyan4")) +
  labs(title = "Tamaño de los pingüinos, Estación Palmer LTER",
       subtitle = "Largo de la aleta y masa corporal por especie",
       x = "largo aleta (mm)",
       y = "masa corporal (g)",
       color = "Especie")
  
```

## Paleta de colores

### RColorBrewer

```{r}
library(RColorBrewer)

# Nos muestra todas las paletas de colores Brewer
display.brewer.all()
```


Si queremos elegir manualmente alguno de los colores de esta [paleta](https://colorbrewer2.org) se puede buscar el código del color deseado o de lo contrario optar por una paleta completa

```{r}

ggplot(data = pinguinos, aes(x = flipper_length_mm, y = body_mass_g)) + 
  geom_point(aes(color = species)) +
  scale_color_brewer(palette = "Set2") +
  labs(title = "Tamaño de los pingüinos, Estación Palmer LTER",
       subtitle = "Largo de la aleta y masa corporal por especie",
       x = "largo aleta (mm)",
       y = "masa corporal (g)",
       color = "Especie")

```

### Viridis

Las opciones de colores de la paleta de Viridis son: "magma" ("A"), "inferno" ("B"), "plasma" ("C"), "viridis" ("D"), and "cividis" ("E").
Podemos elegir la dirección de los colores con "direction". Por defecto, "direction = 1", por lo que los colores están ordenados de oscuros a claros. Si la cambiamos a "direction = -1", los invertimos.
La paleta también permite elegir en qué color queremos comenzar y terminar, modificando los parámetros "begin" y "end" con valores de 0 a 1.

```{r}
library(viridisLite)
library(viridis)

ggplot(data = pinguinos, aes(x = flipper_length_mm, y = body_mass_g)) + 
  geom_point(aes(color = species)) +
  # Necesitamos indicar que la variable es discreta
  scale_color_viridis(discrete = TRUE, option = "viridis", direction = 1, end = 0.8) +
  labs(title = "Tamaño de los pingüinos, Estación Palmer LTER",
       subtitle = "Largo de la aleta y masa corporal por especie",
       x = "largo aleta (mm)",
       y = "masa corporal (g)",
       color = "Especie")

```

Explorando otras [paletas](https://github.com/EmilHvitfeldt/r-color-palettes)

```{r}
```

## Cambiando la posición de la legenda

Los valores válidos para el argumento legend.position son: “left”,“top”, “right”, “bottom”.
También los podemos posicionar utilizando un vector numérico c(x,y) con valores de 0 a 1. 
c(0,0) corresponde a la posición “abajo-izquierda” y c(1,1) a “arriba-derecha”. 

```{r}
ggplot(data = pinguinos, aes(x = flipper_length_mm, y = body_mass_g)) + 
  geom_point(aes(color = species)) + 
  scale_color_manual(values = c("darkorange","purple","cyan4")) +
  labs(title = "Tamaño de los pingüinos, Estación Palmer LTER",
       subtitle = "Largo de la aleta y masa corporal por especie",
       x = "largo aleta (mm)",
       y = "masa corporal (g)",
       color = "Especie") + 
  theme(legend.position = "top")
  # theme(legend.position = c(0.2, 0.7))
```

## Elimando la legenda, los títulos de los ejes y las marcas de los ejes

```{r}

ggplot(data = pinguinos, aes(x = flipper_length_mm, y = body_mass_g)) + 
  geom_point(aes(color = species)) + 
  scale_color_manual(values = c("darkorange","purple","cyan4")) +
  labs(title = "Tamaño de los pingüinos, Estación Palmer LTER",
       subtitle = "Largo de la aleta y masa corporal por especie",
       x = "largo aleta (mm)",
       y = "masa corporal (g)",
       color = "Especie") + 
  theme(legend.position = "none",
        axis.title = element_blank(),
        axis.ticks = element_blank())
```


### Cambiando la posición del título principal y la apariencia de la fuente

Los argumentos más útiles de la función **element_text()** son: _*color, size, face, family*_
Para ajustar la posición horizontal (hjust) o vertical (vjust) podemos utilizar los mismos valores entre 0 y 1 que usamos antes, donde 0 corresponde a la “izquierda” y 1 a la  “derecha”. 

```{r}

ggplot(data = pinguinos, aes(x = flipper_length_mm, y = body_mass_g)) + 
  geom_point(aes(color = species)) + 
  scale_color_manual(values = c("darkorange","purple","cyan4")) +
  labs(title = "Tamaño de los pingüinos, Estación Palmer LTER",
       subtitle = "Largo de la aleta y masa corporal por especie",
       x = "largo aleta (mm)",
       y = "masa corporal (g)",
       color = "Especie") + 
  theme(plot.title = element_text(hjust = 0.5, face = "bold"),
        plot.subtitle = element_text(hjust = 0.5, face = "italic"))

```

## Agregando un tema

Tenemos muchas opciones disponibles para elegir como tema en ggplot2. [Aquí](https://ggplot2.tidyverse.org/reference/ggtheme.html) hay un listado de las opciones básicas.

```{r}

grafico <- ggplot(data = pinguinos, aes(x = flipper_length_mm, y = body_mass_g)) + 
  geom_point(aes(color = species)) + 
  scale_color_manual(values = c("darkorange","purple","cyan4")) +
  labs(title = "Tamaño de los pingüinos, Estación Palmer LTER",
       subtitle = "Largo de la aleta y masa corporal por especie",
       x = "largo aleta (mm)",
       y = "masa corporal (g)",
       color = "Especie") + 
  theme_bw() +
  theme(plot.title = element_text(hjust = 0.5, face = "bold"),
        plot.subtitle = element_text(hjust = 0.5, face = "italic"))

grafico
```
```{r}

```



__Otros recursos:__

- [R para Ciencia de Datos](https://es.r4ds.hadley.nz/visualizaci%C3%B3n-de-datos.html)

- [R Graphics Cookbook](https://r-graphics.org/)

- [ggplot](https://ggplot2.tidyverse.org/index.html)

- [Data Visualization with ggplot2](https://viz-ggplot2.rsquaredacademy.com/index.html)

- [Data Visualization with R](https://rkabacoff.github.io/datavis/)

- [Sthda](http://www.sthda.com/english/wiki/ggplot2-point-shapes)

- [Datanovia](https://www.datanovia.com)

- [Colors](http://html-color-codes.com/)


[pingüinos](https://es.greenpeace.org/es/noticias/cual-es-top-de-los-tops-pinguinos-de-la-antartida/)
